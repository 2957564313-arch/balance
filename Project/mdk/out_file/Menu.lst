C251 COMPILER V5.60.0,  Menu                                                               24/01/26  19:25:49  PAGE 1   


C251 COMPILER V5.60.0, COMPILATION OF MODULE Menu
OBJECT MODULE PLACED IN .\out_file\Menu.obj
COMPILER INVOKED BY: C:\Keil_v5\C251\BIN\C251.EXE ..\code\Menu.c LARGE NOALIAS WARNINGLEVEL(3) OPTIMIZE(0,SIZE) BROWSE I
                    -NCDIR(..\..\libraries\zf_common;..\..\libraries\zf_components;..\..\libraries\zf_device;..\..\libraries\zf_driver;..\use
                    -r;..\code) DEBUG PRINT(.\out_file\Menu.lst) OBJECT(.\out_file\Menu.obj) 

stmt  level    source

    1          #include "zf_common_headfile.h"                 // Device header
    2          
    3          #include "OLED.h"
*** ERROR C318 IN LINE 5 OF ..\code\OLED.h: can't open file 'zf_device_oledfont.h'
    4          
    5          #include "Menu.h"
    6          #include "Key.h"
    7          
    8          //菜单选项数目
    9          #define NUM_SELECTION           5
   10          
   11          #define Act_Menu                        0
   12          #define Main_Menu                       0
   13          #define Mode_1_Menu                     1
   14          #define Mode_2_Menu                     2
   15          #define Mode_3_Menu                     3
   16          #define Mode_4_Menu                     4
   17          #define Mode_5_Menu                     5
   18          
   19          #define Act_Mode                        0
   20          #define Browse_Mode                     0
   21          #define Edit_Mode                       1
   22          
   23          uint8 Cursor_Pos = 1;
   24          
   25          int Show_Main_Menu(Cursor_Pos)
   26          {
*** WARNING C35 IN LINE 26 OF ..\code\Menu.c: 'Show_Main_Menu': uses old-style declarator
   27   1              OLED_Clear();
   28   1          if(Cursor_Pos != 5)
   29   1              {
   30   2                      OLED_ShowChar(Cursor_Pos, 1, '>');
   31   2      
   32   2                      OLED_ShowString(1, 2, "Mode_1");
   33   2                      OLED_ShowString(2, 2, "Mode_2");
   34   2                      OLED_ShowString(3, 2, "Mode_3");
   35   2                      OLED_ShowString(4, 2, "Mode_4");
   36   2      
   37   2              }
   38   1              else
   39   1              {
   40   2                      OLED_ShowChar(1, 1, '>');
   41   2                      OLED_ShowString(1, 2, "Mode_5");
   42   2              }
   43   1      
   44   1      }
   45          
   46          int Show_Mode_1_Menu(void)
   47          {
   48   1              OLED_Clear();
   49   1         
   50   1              if(Act_Mode == Edit_Mode)
   51   1              {
   52   2                      OLED_ShowChar(1, 15, 'E');
   53   2              }
   54   1      
   55   1          OLED_ShowChar(Curso_Pos, 1, '>');
C251 COMPILER V5.60.0,  Menu                                                               24/01/26  19:25:49  PAGE 2   

*** ERROR C67 IN LINE 55 OF ..\code\Menu.c: 'Curso_Pos': undefined identifier
*** WARNING C96 IN LINE 55 OF ..\code\Menu.c: 'OLED_ShowChar': too few actual parameters
   56   1      
   57   1      }
   58          
   59          int Show_Mode_2_Menu(void)
   60          {
   61   1              OLED_Clear();
   62   1         
   63   1              if(Act_Mode == Edit_Mode)
   64   1              {
   65   2                      OLED_ShowChar(1, 15, 'E');
   66   2              }
   67   1      
   68   1          OLED_ShowChar(Curso_Pos, 1, '>');
*** ERROR C67 IN LINE 68 OF ..\code\Menu.c: 'Curso_Pos': undefined identifier
*** WARNING C96 IN LINE 68 OF ..\code\Menu.c: 'OLED_ShowChar': too few actual parameters
   69   1              
   70   1      }
   71          
   72          int Show_Mode_3_Menu(void)
   73          {
   74   1              OLED_Clear();
   75   1         
   76   1              if(Act_Mode == Edit_Mode)
   77   1              {
   78   2                      OLED_ShowChar(1, 15, 'E');
   79   2              }
   80   1      
   81   1          OLED_ShowChar(Curso_Pos, 1, '>');
*** ERROR C67 IN LINE 81 OF ..\code\Menu.c: 'Curso_Pos': undefined identifier
*** WARNING C96 IN LINE 81 OF ..\code\Menu.c: 'OLED_ShowChar': too few actual parameters
   82   1              
   83   1      }
   84          
   85          int Show_Mode_4_Menu(void)
   86          {
   87   1              OLED_Clear();
   88   1         
   89   1              if(Act_Mode == Edit_Mode)
   90   1              {
   91   2                      OLED_ShowChar(1, 15, 'E');
   92   2              }
   93   1      
   94   1          OLED_ShowChar(Curso_Pos, 1, '>');
*** ERROR C67 IN LINE 94 OF ..\code\Menu.c: 'Curso_Pos': undefined identifier
*** WARNING C96 IN LINE 94 OF ..\code\Menu.c: 'OLED_ShowChar': too few actual parameters
   95   1              
   96   1      }
   97          
   98          int Show_Mode_5_Menu(void)
   99          {
  100   1              OLED_Clear();
  101   1         
  102   1              if(Act_Mode == Edit_Mode)
  103   1              {
  104   2                      OLED_ShowChar(1, 15, 'E');
  105   2              }
  106   1      
  107   1          OLED_ShowChar(Curso_Pos, 1, '>');
*** ERROR C67 IN LINE 107 OF ..\code\Menu.c: 'Curso_Pos': undefined identifier
*** WARNING C96 IN LINE 107 OF ..\code\Menu.c: 'OLED_ShowChar': too few actual parameters
  108   1              
  109   1      }
  110          
  111          void Handle_Key()
C251 COMPILER V5.60.0,  Menu                                                               24/01/26  19:25:49  PAGE 3   

  112          {
  113   1              Key_Tick();
  114   1              if(Act_Menu == Main_Menu)
  115   1              {
  116   2                      if(Key_Check(KEY_NAME_UP,KEY_SINGLE))  // 上键
  117   2                      {
  118   3                              Cursor_Pos = (Cursor_Pos == 1) ? NUM_SELECTION : (Cursor_Pos - 1);
  119   3                              Show_Main_Menu(Cursor_Pos);
  120   3                      }
  121   2                      else if(Key_Check(KEY_NAME_DOWN,KEY_SINGLE))  // 下键
  122   2                      {
  123   3                              Cursor_Pos = (Cursor_Pos == NUM_SELECTION) ? 1 : (Cursor_Pos + 1);
  124   3                              Show_Main_Menu(Cursor_Pos);
  125   3                      }
  126   2                      else if(Key_Check(KEY_NAME_COMFIRM,KEY_SINGLE))  // 确认键
  127   2                  {       
  128   3                              if(Cursor_Pos == 1)
  129   3                          {
  130   4                                      Act_Menu = Mode_1_Menu;
*** ERROR C100 IN LINE 130 OF ..\code\Menu.c: '=': left operand must be l-value
  131   4                                      Show_Mode_1_Menu();
  132   4                  }
  133   3                  else if(Cursor_Pos == 2)
  134   3                  {
  135   4                          Act_Menu = Mode_2_Menu;
*** ERROR C100 IN LINE 135 OF ..\code\Menu.c: '=': left operand must be l-value
  136   4                      Cursor_Pos = 2;
  137   4                                      Show_Mode_2_Menu();
  138   4                  }
  139   3                              else if(Cursor_Pos == 3)
  140   3                  {
  141   4                              Act_Menu = Mode_3_Menu;
*** ERROR C100 IN LINE 141 OF ..\code\Menu.c: '=': left operand must be l-value
  142   4                      Cursor_Pos = 2;
  143   4                      Show_Mode_3_Menu();
  144   4                  }
  145   3                              else if(Cursor_Pos == 4)
  146   3                  {
  147   4                      Act_Menu = Mode_4_Menu;
*** ERROR C100 IN LINE 147 OF ..\code\Menu.c: '=': left operand must be l-value
  148   4                      Cursor_Pos = 2;
  149   4                                      Show_Mode_4_Menu();
  150   4                              }
  151   3                              else if(Cursor_Pos == 5)
  152   3                  {
  153   4                      Act_Menu = Mode_5_Menu;
*** ERROR C100 IN LINE 153 OF ..\code\Menu.c: '=': left operand must be l-value
  154   4                      Cursor_Pos = 2;
  155   4                                      Show_Mode_5_Menu();
  156   4                              }
  157   3              }
  158   2              }
  159   1              else if(Act_Menu == Mode_1_Menu)
  160   1              {
  161   2                      if(Act_Mode == Browse_Mode)  // 浏览模式
  162   2                      {
  163   3                              if(Key_Check(KEY_NAME_UP,KEY_SINGLE))  // 上键
  164   3                              {
  165   4                                      Cursor_Pos = (Cursor_Pos == 2) ? 4 : (Cursor_Pos - 1);
  166   4                                      Show_Mode_1_Menu();
  167   4                              }
  168   3                              else if(Key_Check(KEY_NAME_DOWN,KEY_SINGLE))  // 下键
  169   3                              {
  170   4                                      Cursor_Pos = (Cursor_Pos == 4) ? 2 : (Cursor_Pos + 1);
  171   4                                      Show_Mode_1_Menu();
  172   4                              }
C251 COMPILER V5.60.0,  Menu                                                               24/01/26  19:25:49  PAGE 4   

  173   3                              else if(Key_Check(KEY_NAME_COMFIRM,KEY_SINGLE))  // 确认键
  174   3                              {
  175   4                                      Act_Mode = Edit_Mode;
*** ERROR C100 IN LINE 175 OF ..\code\Menu.c: '=': left operand must be l-value
  176   4                                      Show_Mode_1_Menu();
  177   4                              }
  178   3                              else if(Key_Check(KEY_NAME_BACK,KEY_SINGLE))  // 返回键
  179   3                              {
  180   4                                      Act_Menu = Main_Menu;
*** ERROR C100 IN LINE 180 OF ..\code\Menu.c: '=': left operand must be l-value
  181   4                                      Cursor_Pos = 1;
  182   4                                      Show_Main_Menu(Cursor_Pos);
  183   4                              }
  184   3                      }
  185   2                      else // 编辑模式
  186   2                      {
  187   3                              if(Key_Check(KEY_NAME_UP,KEY_SINGLE))  // 上键
  188   3                              {
  189   4                                      //此处执行Mode_1编辑上键操作
  190   4                                      Show_Mode_1_Menu();
  191   4                              }
  192   3                              else if(Key_Check(KEY_NAME_DOWN,KEY_SINGLE))  // 下键
  193   3                              {
  194   4                                      //此处执行Mode_1编辑下键操作
  195   4                                      Show_Mode_1_Menu();
  196   4                              }
  197   3                              else if(Key_Check(KEY_NAME_COMFIRM,KEY_SINGLE))  // 确认键
  198   3                              {
  199   4                                      Act_Mode = Browse_Mode;
*** ERROR C100 IN LINE 199 OF ..\code\Menu.c: '=': left operand must be l-value
  200   4                                      Show_Mode_1_Menu();
  201   4                              }
  202   3                              else if(Key_Check(KEY_NAME_BACK,KEY_SINGLE))  // 返回键
  203   3                              {
  204   4                                      Act_Mode = Browse_Mode;
*** ERROR C100 IN LINE 204 OF ..\code\Menu.c: '=': left operand must be l-value
  205   4                                      Show_Mode_1_Menu();
  206   4                              }
  207   3                      }
  208   2              }
  209   1              else if(Act_Menu == Mode_2_Menu)
  210   1              {
  211   2                      if(Act_Mode == Browse_Mode)  // 浏览模式
  212   2                      {
  213   3                              if(Key_Check(KEY_NAME_UP,KEY_SINGLE))  // 上键
  214   3                              {
  215   4                                      Cursor_Pos = (Cursor_Pos == 2) ? 4 : (Cursor_Pos - 1);
  216   4                                      Show_Mode_2_Menu();
  217   4                              }
  218   3                              else if(Key_Check(KEY_NAME_DOWN,KEY_SINGLE))  // 下键
  219   3                              {
  220   4                                      Cursor_Pos = (Cursor_Pos == 4) ? 2 : (Cursor_Pos + 1);
  221   4                                      Show_Mode_2_Menu();
  222   4                              }
  223   3                              else if(Key_Check(KEY_NAME_COMFIRM,KEY_SINGLE))  // 确认键
  224   3                              {
  225   4                                      Act_Mode = Edit_Mode;
*** ERROR C100 IN LINE 225 OF ..\code\Menu.c: '=': left operand must be l-value
  226   4                                      Show_Mode_2_Menu();
  227   4                              }
  228   3                              else if(Key_Check(KEY_NAME_BACK,KEY_SINGLE))  // 返回键
  229   3                              {
  230   4                                      Act_Menu = Main_Menu;
*** ERROR C100 IN LINE 230 OF ..\code\Menu.c: '=': left operand must be l-value
  231   4                                      Cursor_Pos = 2;
  232   4                                      Show_Main_Menu(Cursor_Pos);
C251 COMPILER V5.60.0,  Menu                                                               24/01/26  19:25:49  PAGE 5   

  233   4                              }
  234   3                      }
  235   2                      else // 编辑模式
  236   2                      {
  237   3                              if(Key_Check(KEY_NAME_UP,KEY_SINGLE))  // 上键
  238   3                              {
  239   4                                      //此处执行Mode_2编辑上键操作
  240   4                                      Show_Mode_2_Menu();
  241   4                              }
  242   3                              else if(Key_Check(KEY_NAME_DOWN,KEY_SINGLE))  // 下键
  243   3                              {
  244   4                                      //此处执行Mode_2编辑下键操作
  245   4                                      Show_Mode_2_Menu();
  246   4                              }
  247   3                              else if(Key_Check(KEY_NAME_COMFIRM,KEY_SINGLE))  // 确认键
  248   3                              {
  249   4                                      Act_Mode = Browse_Mode;
*** ERROR C100 IN LINE 249 OF ..\code\Menu.c: '=': left operand must be l-value
  250   4                                      Show_Mode_2_Menu();
  251   4                              }
  252   3                              else if(Key_Check(KEY_NAME_BACK,KEY_SINGLE))  // 返回键
  253   3                              {
  254   4                                      Act_Mode = Browse_Mode;
*** ERROR C100 IN LINE 254 OF ..\code\Menu.c: '=': left operand must be l-value
  255   4                                      Show_Mode_2_Menu();
  256   4                              }
  257   3                      }
  258   2              }
  259   1              else if(Act_Menu == Mode_1_Menu)
  260   1              {
  261   2                      if(Act_Mode == Browse_Mode)  // 浏览模式
  262   2                      {
  263   3                              if(Key_Check(KEY_NAME_UP,KEY_SINGLE))  // 上键
  264   3                              {
  265   4                                      Cursor_Pos = (Cursor_Pos == 2) ? 4 : (Cursor_Pos - 1);
  266   4                                      Show_Mode_3_Menu();
  267   4                              }
  268   3                              else if(Key_Check(KEY_NAME_DOWN,KEY_SINGLE))  // 下键
  269   3                              {
  270   4                                      Cursor_Pos = (Cursor_Pos == 4) ? 2 : (Cursor_Pos + 1);
  271   4                                      Show_Mode_3_Menu();
  272   4                              }
  273   3                              else if(Key_Check(KEY_NAME_COMFIRM,KEY_SINGLE))  // 确认键
  274   3                              {
  275   4                                      Act_Mode = Edit_Mode;
*** ERROR C100 IN LINE 275 OF ..\code\Menu.c: '=': left operand must be l-value
  276   4                                      Show_Mode_3_Menu();
  277   4                              }
  278   3                              else if(Key_Check(KEY_NAME_BACK,KEY_SINGLE))  // 返回键
  279   3                              {
  280   4                                      Act_Menu = Main_Menu;
*** ERROR C100 IN LINE 280 OF ..\code\Menu.c: '=': left operand must be l-value
  281   4                                      Cursor_Pos = 3;
  282   4                                      Show_Main_Menu(Cursor_Pos);
  283   4                              }
  284   3                      }
  285   2                      else // 编辑模式
  286   2                      {
  287   3                              if(Key_Check(KEY_NAME_UP,KEY_SINGLE))  // 上键
  288   3                              {
  289   4                                      //此处执行Mode_3编辑上键操作
  290   4                                      Show_Mode_3_Menu();
  291   4                              }
  292   3                              else if(Key_Check(KEY_NAME_DOWN,KEY_SINGLE))  // 下键
  293   3                              {
  294   4                                      //此处执行Mode_3编辑下键操作
C251 COMPILER V5.60.0,  Menu                                                               24/01/26  19:25:49  PAGE 6   

  295   4                                      Show_Mode_3_Menu();
  296   4                              }
  297   3                              else if(Key_Check(KEY_NAME_COMFIRM,KEY_SINGLE))  // 确认键
  298   3                              {
  299   4                                      Act_Mode = Browse_Mode;
*** ERROR C100 IN LINE 299 OF ..\code\Menu.c: '=': left operand must be l-value
  300   4                                      Show_Mode_3_Menu();
  301   4                              }
  302   3                              else if(Key_Check(KEY_NAME_BACK,KEY_SINGLE))  // 返回键
  303   3                              {
  304   4                                      Act_Mode = Browse_Mode;
*** ERROR C100 IN LINE 304 OF ..\code\Menu.c: '=': left operand must be l-value
  305   4                                      Show_Mode_3_Menu();
  306   4                              }
  307   3                      }
  308   2              }
  309   1              else if(Act_Menu == Mode_1_Menu)
  310   1              {
  311   2                      if(Act_Mode == Browse_Mode)  // 浏览模式
  312   2                      {
  313   3                              if(Key_Check(KEY_NAME_UP,KEY_SINGLE))  // 上键
  314   3                              {
  315   4                                      Cursor_Pos = (Cursor_Pos == 2) ? 4 : (Cursor_Pos - 1);
  316   4                                      Show_Mode_4_Menu();
  317   4                              }
  318   3                              else if(Key_Check(KEY_NAME_DOWN,KEY_SINGLE))  // 下键
  319   3                              {
  320   4                                      Cursor_Pos = (Cursor_Pos == 4) ? 2 : (Cursor_Pos + 1);
  321   4                                      Show_Mode_4_Menu();
  322   4                              }
  323   3                              else if(Key_Check(KEY_NAME_COMFIRM,KEY_SINGLE))  // 确认键
  324   3                              {
  325   4                                      Act_Mode = Edit_Mode;
*** ERROR C100 IN LINE 325 OF ..\code\Menu.c: '=': left operand must be l-value
  326   4                                      Show_Mode_4_Menu();
  327   4                              }
  328   3                              else if(Key_Check(KEY_NAME_BACK,KEY_SINGLE))  // 返回键
  329   3                              {
  330   4                                      Act_Menu = Main_Menu;
*** ERROR C100 IN LINE 330 OF ..\code\Menu.c: '=': left operand must be l-value
  331   4                                      Cursor_Pos = 4;
  332   4                                      Show_Main_Menu(Cursor_Pos);
  333   4                              }
  334   3                      }
  335   2                      else // 编辑模式
  336   2                      {
  337   3                              if(Key_Check(KEY_NAME_UP,KEY_SINGLE))  // 上键
  338   3                              {
  339   4                                      //此处执行Mode_4编辑上键操作
  340   4                                      Show_Mode_4_Menu();
  341   4                              }
  342   3                              else if(Key_Check(KEY_NAME_DOWN,KEY_SINGLE))  // 下键
  343   3                              {
  344   4                                      //此处执行Mode_4编辑下键操作
  345   4                                      Show_Mode_4_Menu();
  346   4                              }
  347   3                              else if(Key_Check(KEY_NAME_COMFIRM,KEY_SINGLE))  // 确认键
  348   3                              {
  349   4                                      Act_Mode = Browse_Mode;
*** ERROR C100 IN LINE 349 OF ..\code\Menu.c: '=': left operand must be l-value
  350   4                                      Show_Mode_4_Menu();
  351   4                              }
  352   3                              else if(Key_Check(KEY_NAME_BACK,KEY_SINGLE))  // 返回键
  353   3                              {
  354   4                                      Act_Mode = Browse_Mode;
*** ERROR C100 IN LINE 354 OF ..\code\Menu.c: '=': left operand must be l-value
C251 COMPILER V5.60.0,  Menu                                                               24/01/26  19:25:49  PAGE 7   

  355   4                                      Show_Mode_4_Menu();
  356   4                              }
  357   3                      }
  358   2              }
  359   1              else if(Act_Menu == Mode_1_Menu)
  360   1              {
  361   2                      if(Act_Mode == Browse_Mode)  // 浏览模式
  362   2                      {
  363   3                              if(Key_Check(KEY_NAME_UP,KEY_SINGLE))  // 上键
  364   3                              {
  365   4                                      Cursor_Pos = (Cursor_Pos == 2) ? 4 : (Cursor_Pos - 1);
  366   4                                      Show_Mode_5_Menu();
  367   4                              }
  368   3                              else if(Key_Check(KEY_NAME_DOWN,KEY_SINGLE))  // 下键
  369   3                              {
  370   4                                      Cursor_Pos = (Cursor_Pos == 4) ? 2 : (Cursor_Pos + 1);
  371   4                                      Show_Mode_5_Menu();
  372   4                              }
  373   3                              else if(Key_Check(KEY_NAME_COMFIRM,KEY_SINGLE))  // 确认键
  374   3                              {
  375   4                                      Act_Mode = Edit_Mode;
*** ERROR C100 IN LINE 375 OF ..\code\Menu.c: '=': left operand must be l-value
  376   4                                      Show_Mode_5_Menu();
  377   4                              }
  378   3                              else if(Key_Check(KEY_NAME_BACK,KEY_SINGLE))  // 返回键
  379   3                              {
  380   4                                      Act_Menu = Main_Menu;
*** ERROR C100 IN LINE 380 OF ..\code\Menu.c: '=': left operand must be l-value
  381   4                                      Cursor_Pos = 5;
  382   4                                      Show_Main_Menu(Cursor_Pos);
  383   4                              }
  384   3                      }
  385   2                      else // 编辑模式
  386   2                      {
  387   3                              if(Key_Check(KEY_NAME_UP,KEY_SINGLE))  // 上键
  388   3                              {
  389   4                                      //此处执行Mode_5编辑上键操作
  390   4                                      Show_Mode_5_Menu();
  391   4                              }
  392   3                              else if(Key_Check(KEY_NAME_DOWN,KEY_SINGLE))  // 下键
  393   3                              {
  394   4                                      //此处执行Mode_5编辑下键操作
  395   4                                      Show_Mode_5_Menu();
  396   4                              }
  397   3                              else if(Key_Check(KEY_NAME_COMFIRM,KEY_SINGLE))  // 确认键
  398   3                              {
  399   4                                      Act_Mode = Browse_Mode;
*** ERROR C100 IN LINE 399 OF ..\code\Menu.c: '=': left operand must be l-value
  400   4                                      Show_Mode_5_Menu();
  401   4                              }
  402   3                              else if(Key_Check(KEY_NAME_BACK,KEY_SINGLE))  // 返回键
  403   3                              {
  404   4                                      Act_Mode = Browse_Mode;
*** ERROR C100 IN LINE 404 OF ..\code\Menu.c: '=': left operand must be l-value
  405   4                                      Show_Mode_5_Menu();
  406   4                              }
  407   3                      }
  408   2              }
  409   1      }

C251 COMPILATION COMPLETE.  6 WARNING(S),  31 ERROR(S)
